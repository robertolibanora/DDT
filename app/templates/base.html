<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}DDT Processor{% endblock %} - Tema Mare</title>
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/preview_modal.css">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <a href="#main-content" class="skip-link">Salta al contenuto principale</a>
    <header>
        <h1>{% block header_title %}ğŸ“¦ DDT Processor{% endblock %}</h1>
        <nav aria-label="Navigazione principale">
            <a href="/dashboard" id="nav-dashboard" aria-label="Vai alla dashboard">ğŸ“Š Dashboard</a>
            <a href="/upload" id="nav-upload" aria-label="Carica un nuovo DDT">ğŸ“¤ Carica</a>
            <a href="/rules" id="nav-rules" aria-label="Gestisci le regole">âš™ï¸ Regole</a>
            <a href="/logout" id="nav-logout" style="margin-left: auto;" aria-label="Esci dal sistema">ğŸšª Logout</a>
        </nav>
        {% block header_extra %}{% endblock %}
    </header>

    {% block messages %}{% endblock %}

    <main id="main-content">
        {% block content %}{% endblock %}
    </main>

    <footer>
        <p>DDT Processor - Sistema di gestione Documenti di Trasporto</p>
    </footer>

    {% block scripts %}{% endblock %}
    <script src="/static/js/preview_modal.js"></script>
    <script>
        // Evidenzia il link di navigazione attivo
        (function() {
            const path = window.location.pathname;
            const navUpload = document.getElementById('nav-upload');
            const navDashboard = document.getElementById('nav-dashboard');
            const navRules = document.getElementById('nav-rules');
            
            if (path === '/dashboard') {
                if (navDashboard) navDashboard.classList.add('active');
            } else if (path === '/upload') {
                if (navUpload) navUpload.classList.add('active');
            } else if (path === '/rules') {
                if (navRules) navRules.classList.add('active');
            }
        })();
    </script>
</body>
</html>

